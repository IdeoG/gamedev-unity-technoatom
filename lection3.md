# Третья лекция

## Графика

### Software render модели `CPU`

- В файле `*.obj` содержится информация о вершинах, треугольниках, нормалях модели
- Как происходит рендер?
    1. Проволочный рендер
        - Парсим файл `*.obj`
        - Пиксель за пискелем закрашиваем деталь
    2. Закрашиваем треугольники цветом
    3. Отбасываем все нормали, которые смотрят внутрь модели
    4. Освещение
    5. `z-buffer` - добавляем глубины
        - массив, в котором хранится глубина для каждой отрисованной точки
        - все точки, которые будут ближе, будут с большей альфой, те, что дальше, будут с меньшей альфой
        - полупрозрачные объекты не пишутся в `z-buffer`, т.к. за ним видны другие объекты
    6. `TextureMapping` - накладываем текстуру на каждый полигон

### Hardware render модели `GPU`

- Отрисовку можно изменить на 2 этапах
    - `Vertex Shader` - при построении треугольников (проволочный рендер)
    - `Fragment Shader` - после отрисовки модели. Можем менять цвет
- Есть два буфера цвета
    - который показывается сейчас на экране
    - который обсчитывается

### Graphic Pipeline

- Материал хранит ссылку на шейдер и говорит о том, как отрисовать модель
- Источник света - по сути направление, которое попдает в шейдера
- Шейдер - по сути - это класс, а материал - его объект, или частная реализация
- Материал влияет на отображение объекта, но не на его физику
- `unlit shader` - шаблон

### Camera

- Проекции камеры
    - `перспективная` - ближний объект больше, дальний - меньше
    - `ортографическая` - объекты одного размера
- `Clear Flags` - говорят о том, как чистить `z-buffer`
- `FOV` - область видимости

### Пост-эффекты

- Отрисовка одной текстуры из другой
    - Происходит вызовом функции `Graphics.Blit`, которым можно выбрать какой `Pass` из шейдера сделать
    - `Blit(t1, t2, mat, pass)` по сути копирует точки текстуры `t1` в текстуру `t2` 
- `Culling Mask` - будут рендериться только те слои, которые мы указали в `culling mask` камеры
- Пост-эффекты позволяют рендерить маски отдельно

## Источники освещения

### Источники

- `Directional` - паралелльные лучи света (самый простой ИС)
- `Point` - во всех направлениях из точки (`omnidirectional light`). Применяет для подсветки небольших локаций
- `Spot Light` - как фонарик (конус из точки)
- `Area Light` - подсветка области

### Освещение

- `Baked Light` - создает текстуру, состоящую из запеченного света и накладывает на объекты, которые запекались
- `Ambient Light` по сути тень, от источника света или рассеянный свет от источника света там, где света нет